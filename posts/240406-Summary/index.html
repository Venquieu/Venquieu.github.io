<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>关于深度学习的一些总结 | Venturi Li&#39;s Space</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1. 模型 1.1 模型方案定义 实际问题是复杂的，如何从实际问题中抽象关键需求并定义为一个模型预测问题是非常重要和讲究的。这一步绝对不是拍脑袋看到个模型就用可以解决的，它要求设计者必须对深度学习有深入的了解。如果一开始的方案定义就有问题，那么后边再怎么做都是无用功。 深度学习能做什么——方案定义是否合理？ 比如用卷积网络去做某件事，那么就必须了解卷积有什么特性、能做什么、不能做什么。一个">
<meta property="og:type" content="article">
<meta property="og:title" content="关于深度学习的一些总结">
<meta property="og:url" content="https://venquieu.github.io/posts/240406-Summary/index.html">
<meta property="og:site_name" content="Venturi Li&#39;s Space">
<meta property="og:description" content="1. 模型 1.1 模型方案定义 实际问题是复杂的，如何从实际问题中抽象关键需求并定义为一个模型预测问题是非常重要和讲究的。这一步绝对不是拍脑袋看到个模型就用可以解决的，它要求设计者必须对深度学习有深入的了解。如果一开始的方案定义就有问题，那么后边再怎么做都是无用功。 深度学习能做什么——方案定义是否合理？ 比如用卷积网络去做某件事，那么就必须了解卷积有什么特性、能做什么、不能做什么。一个">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-06T04:00:00.000Z">
<meta property="article:modified_time" content="2024-05-26T12:39:14.212Z">
<meta property="article:author" content="Venturi Li">
<meta property="article:tag" content="review">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Venturi Li's Space" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Venturi Li&#39;s Space</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://venquieu.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-240406-Summary" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/posts/240406-Summary/" class="article-date">
  <time class="dt-published" datetime="2024-04-06T04:00:00.000Z" itemprop="datePublished">2024-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      关于深度学习的一些总结
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="模型">1. 模型</h2>
<h3 id="模型方案定义">1.1 模型方案定义</h3>
<p>实际问题是复杂的，如何从实际问题中抽象关键需求并定义为一个模型预测问题是非常重要和讲究的。这一步绝对不是拍脑袋看到个模型就用可以解决的，它要求设计者必须对深度学习有深入的了解。如果一开始的方案定义就有问题，那么后边再怎么做都是无用功。</p>
<p><strong>深度学习能做什么——方案定义是否合理？</strong></p>
<p>比如用卷积网络去做某件事，那么就必须了解卷积有什么特性、能做什么、不能做什么。一个common
sense是卷积具有两大特性：局部连接和权值共享。从这两个特性往下推就是平移不变性，也就是说对同一个物体，不管处于图像上的哪个位置，其语义定义都应该是一致的、不能有歧义。比如同样一个物体，处于图像上的A区域时将其类别定义为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="2.605ex" height="1.934ex" role="img" focusable="false" viewBox="0 -705 1151.6 855"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></svg></mjx-container></span>，处于图像上的B区域时又将其类别定义为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.339ex;" xmlns="http://www.w3.org/2000/svg" width="2.605ex" height="1.934ex" role="img" focusable="false" viewBox="0 -705 1151.6 855"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="mn" transform="translate(748,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g></g></g></svg></mjx-container></span>​，这样的定义就是有问题的，从长期来看，只会使模型confused。</p>
<p>另一方面，必须意识到深度学习模型的能力边界，什么样的设计会让模型学不好。比如数据不均衡导致了长尾效应，那么模型对于长尾类别的预测效果自然不好，设计的时候就要考虑是不是有更好的定义方式从而缓解长尾效应呢？比如要预测非常细小的物体，那么我给定的分辨率下模型能不能看到，如果看不到要考虑是不是输入分辨率要高一些或者使用对细小物体预测效果更好的模型呢？</p>
<p><strong>什么样的模型能最好解决这个问题？</strong></p>
<p>如何抽象出来关键需求同样重要，这决定了要用什么复杂度的模型解决问题。粗略地说，如果单纯想知道一片区域是什么东西，那么语义分割就足够了；如果想要粗粒度的实例级信息，那么目标检测就足够了，如果想要细粒度的实例级信息，那么实例分割就足够了；如果想要全图物体的信息并尽可能给出实例级信息，那么就要考虑全景分割等等。更进一步的，在每一个类型下还可以继续细分找最合适的模型方案，最合适的模型才是最好的模型，才能事半功倍。</p>
<h3 id="数据的重要性">1.2 数据的重要性</h3>
<p>我认为数据集和模型是互相定义的，数据集提供先验数据分布，决定了模型的预测能力和预测方向；模型则定义了数据集的形式和接口并在实际应用过程中指明数据集的扩充方向。</p>
<p><strong>数据驱动</strong></p>
<p>对于深度学习应用来说非常重要的一点是建立由数据驱动的闭环迭代流程，即数据
-&gt; 模型 -&gt; 场景 -&gt; 数据....这样的良性循环。</p>
<p>由数据训练模型、模型上线应用于场景这两点是很容易做到的，困难的在于如何从场景中获取高质量的数据，这就需要有一套完备的数据挖掘流程。只有打通这个流程，才能实现模型、数据和场景的迭代闭环。</p>
<p><strong>数据集</strong></p>
<p>搭建数据集的注意事项有几点：</p>
<ol type="1">
<li>如上边说过的，标注定义不能有歧义；</li>
<li>数据集应该丰富、多样、有效；</li>
<li>要有可靠的评估集，这意味着首先要独立，不能与训练集存在交叠。严格地讲，同一个场景不应该既出现在训练集中又出现在评估集中；其次评估集的数据应该有效，其大体上应该和训练集处于同一数据分布中。</li>
</ol>
<h3 id="类别不均衡-长尾问题">1.3 类别不均衡 / 长尾问题</h3>
<p>长尾问题是一个经常遇到又不好解决的问题，一方面在数据和模型设计上应该尽量避免和缓解这个问题，另一方面需要一些策略缓解。</p>
<p>数据集上：</p>
<ol type="1">
<li>借助于生成模型、仿真环境等方法扩充数据集中的长尾数据；</li>
</ol>
<p>模型上：</p>
<ol type="1">
<li>重采样策略：训练时对tail类过采样，或对head类欠采样；</li>
<li>在loss计算时，使用Focal
loss等；对不同的类别设置不同的权重，对tail类设置更大的权重；</li>
<li>在分割任务中使用region-based损失取代distributed-based损失</li>
<li>采用一些少样本问题的训练方法，如：meta-learning、few-shot
learning、transfer learing；</li>
<li>训练时采用OHEM挖掘难负样本；</li>
<li><a target="_blank" rel="noopener" href="https://arxiv.org/pdf/2003.05176">Equalization Loss for
Long-Tailed Object Recognition</a></li>
</ol>
<h3 id="多任务模型">1.4 多任务模型</h3>
<p>对于一些数据同源或者基本同源的任务来说，可以将其合并在一个模型中，不同任务共享backbone（或backbone+FPN），每个任务有自己的head，这样做的好处有几点：</p>
<ol type="1">
<li>共用特征提取部分可以降低总的模型参数和运算量，减小负载；</li>
<li>如果任务之间没有明显冲突的话，多个任务联合训练有助于提升backbone的特征提取能力，获得更丰富的语义信息；</li>
<li>使用同一个模型后不同任务的结果是可以对齐到图像的，这样也有助于做一些后期的verify。</li>
</ol>
<p>然后，要把多个任务合并在一个模型中不是一件容易的事情，处理不好的话会导致各个任务都显著降点。处理上大概有以下几个要点：</p>
<ol type="1">
<li>不同任务的数据量存在差异，可以考虑对不同任务过采样 / 欠采样；</li>
<li>使用多任务训练的策略，比如<code>CAGrad</code>、<code>MTAN</code>等；</li>
<li>调整各个任务的loss和权重，尽量使各项任务的收敛趋势基本一致，并且控制不同任务的loss量级在合理的范围内。</li>
</ol>
<h2 id="部署">2. 部署</h2>
<p>TODO</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://venquieu.github.io/posts/240406-Summary/" data-id="clwnalu2c0005j8151jqoeoiv" data-title="关于深度学习的一些总结" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/review/" rel="tag">review</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/posts/fastinst/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          FastInst: A Simple Query-Based Model for Real-Time Instance Segmentation
        
      </div>
    </a>
  
  
    <a href="/posts/Config-GitHub-Pages-with-Hexo" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">使用Hexo搭建GitHub博客</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A8%A1%E5%9E%8B%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/">模型结构设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/">深度学习模型部署</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/paper/" rel="tag">paper</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pyTorch/" rel="tag">pyTorch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/review/" rel="tag">review</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" rel="tag">数据集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87/" rel="tag">论文</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/paper/" style="font-size: 13.33px;">paper</a> <a href="/tags/pyTorch/" style="font-size: 10px;">pyTorch</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/review/" style="font-size: 10px;">review</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" style="font-size: 16.67px;">数据集</a> <a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 10px;">论文</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/posts/How-large-is-2x10-35/">How-large-is-2x10-35</a>
          </li>
        
          <li>
            <a href="/posts/transformer">Attention-is-all-you-need</a>
          </li>
        
          <li>
            <a href="/posts/fastinst/">FastInst: A Simple Query-Based Model for Real-Time Instance Segmentation</a>
          </li>
        
          <li>
            <a href="/posts/240406-Summary/">关于深度学习的一些总结</a>
          </li>
        
          <li>
            <a href="/posts/Config-GitHub-Pages-with-Hexo">使用Hexo搭建GitHub博客</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Venturi Li<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>